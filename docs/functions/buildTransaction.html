<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>buildTransaction | midnight-drop-fireblocks-sdk</title><meta name="description" content="Documentation for midnight-drop-fireblocks-sdk"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">midnight-drop-fireblocks-sdk</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">buildTransaction</a></li></ul><h1>Function buildTransaction</h1></div><section class="tsd-panel"><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="buildtransaction"><span class="tsd-kind-call-signature">buildTransaction</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">params</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">{</span><br/>        <span class="tsd-kind-property">fee</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">bigint</span><span class="tsd-signature-symbol">;</span><br/>        <span class="tsd-kind-property">lucid</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Lucid</span><span class="tsd-signature-symbol">;</span><br/>        <span class="tsd-kind-property">ttl</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">;</span><br/>        <span class="tsd-kind-property">txInputs</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">UTxO</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">;</span><br/>        <span class="tsd-kind-property">txOutputs</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">{</span> <span class="tsd-kind-property">address</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">;</span> <span class="tsd-kind-property">assets</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">bigint</span><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">;</span><br/>    <span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">TxComplete</span><span class="tsd-signature-symbol">&gt;</span><a href="#buildtransaction" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Builds a Cardano transaction using Lucid from inputs, outputs, fee, and TTL.</p>
<p>Constructs a complete transaction using the Lucid library's transaction builder.
Collects specified inputs, creates outputs, sets the time-to-live, and completes
the transaction ready for signing.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">params</span>: <span class="tsd-signature-symbol">{</span><br/>    <span class="tsd-kind-property">fee</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">bigint</span><span class="tsd-signature-symbol">;</span><br/>    <span class="tsd-kind-property">lucid</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Lucid</span><span class="tsd-signature-symbol">;</span><br/>    <span class="tsd-kind-property">ttl</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">;</span><br/>    <span class="tsd-kind-property">txInputs</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">UTxO</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">;</span><br/>    <span class="tsd-kind-property">txOutputs</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">{</span> <span class="tsd-kind-property">address</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">;</span> <span class="tsd-kind-property">assets</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">bigint</span><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">;</span><br/><span class="tsd-signature-symbol">}</span></span><div class="tsd-comment tsd-typography"><p>Transaction building parameters</p>
</div><div class="tsd-comment tsd-typography"></div><ul class="tsd-parameters"><li class="tsd-parameter"><h5><span class="tsd-kind-property">fee</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">bigint</span></h5><div class="tsd-comment tsd-typography"><p>Transaction fee as BigInt (in lovelace)</p>
</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5><span class="tsd-kind-property">lucid</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Lucid</span></h5><div class="tsd-comment tsd-typography"><p>Initialized Lucid instance</p>
</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5><span class="tsd-kind-property">ttl</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><p>Time-to-live timestamp (Unix time in milliseconds)</p>
</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5><span class="tsd-kind-property">txInputs</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">UTxO</span><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><p>Array of UTxO inputs to spend in the transaction</p>
</div><div class="tsd-comment tsd-typography"></div></li><li class="tsd-parameter"><h5><span class="tsd-kind-property">txOutputs</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-symbol">{</span> <span class="tsd-kind-property">address</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">;</span> <span class="tsd-kind-property">assets</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">bigint</span><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">[]</span></h5><div class="tsd-comment tsd-typography"><p>Array of outputs specifying recipients and amounts</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">TxComplete</span><span class="tsd-signature-symbol">&gt;</span></h4><p>A Promise resolving to a completed Lucid transaction ready for signing</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example">Example<a href="#example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-3">// Initialize Lucid</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">lucid</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">Lucid</span><span class="hl-1">.</span><span class="hl-0">new</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Blockfrost</span><span class="hl-1">(</span><span class="hl-2">&#39;https://cardano-mainnet.blockfrost.io/api/v0&#39;</span><span class="hl-1">, </span><span class="hl-4">projectId</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Mainnet&#39;</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// Prepare transaction components</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">inputs</span><span class="hl-1"> = </span><span class="hl-0">createTransactionInputs</span><span class="hl-1">(</span><span class="hl-4">selectedUtxos</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">outputs</span><span class="hl-1"> = </span><span class="hl-0">createTransactionOutputs</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-9">1500000</span><span class="hl-1">, </span><span class="hl-9">200000</span><span class="hl-1">, </span><span class="hl-4">recipientAddress</span><span class="hl-1">, </span><span class="hl-4">senderAddress</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">tokenPolicyId</span><span class="hl-1">, </span><span class="hl-2">&#39;NIGHT&#39;</span><span class="hl-1">, </span><span class="hl-9">1000</span><span class="hl-1">, </span><span class="hl-4">selectedUtxos</span><br/><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">ttl</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">calculateTtl</span><span class="hl-1">(</span><span class="hl-4">blockfrost</span><span class="hl-1">, </span><span class="hl-4">lucid</span><span class="hl-1">);</span><br/><br/><span class="hl-3">// Build transaction</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">completedTx</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">buildTransaction</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">lucid</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">txInputs:</span><span class="hl-1"> </span><span class="hl-4">inputs</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">txOutputs:</span><span class="hl-1"> </span><span class="hl-4">outputs</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fee:</span><span class="hl-1"> </span><span class="hl-9">200000</span><span class="hl-5">n</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">ttl</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Sign and submit</span><br/><span class="hl-4">lucid</span><span class="hl-1">.</span><span class="hl-0">selectWallet</span><span class="hl-1">(...);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">signedTx</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">completedTx</span><span class="hl-1">.</span><span class="hl-0">sign</span><span class="hl-1">().</span><span class="hl-0">complete</span><span class="hl-1">();</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">txHash</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">signedTx</span><span class="hl-1">.</span><span class="hl-0">submit</span><span class="hl-1">();</span><br/><br/><span class="hl-3">// Complete workflow</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">blockfrost</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">BlockFrostAPI</span><span class="hl-1">({ </span><span class="hl-4">projectId</span><span class="hl-1"> });</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">lucid</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">Lucid</span><span class="hl-1">.</span><span class="hl-0">new</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Blockfrost</span><span class="hl-1">(</span><span class="hl-2">&#39;https://cardano-mainnet.blockfrost.io/api/v0&#39;</span><span class="hl-1">, </span><span class="hl-4">projectId</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;Mainnet&#39;</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// Fetch and select UTXOs</span><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-8">selectedUtxos</span><span class="hl-1"> } = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">fetchAndSelectUtxos</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">address</span><span class="hl-1">, </span><span class="hl-4">projectId</span><span class="hl-1">, </span><span class="hl-4">tokenPolicyId</span><span class="hl-1">, </span><span class="hl-9">1000</span><span class="hl-1">, </span><span class="hl-9">200000</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// Create inputs and outputs</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">inputs</span><span class="hl-1"> = </span><span class="hl-0">createTransactionInputs</span><span class="hl-1">(</span><span class="hl-4">selectedUtxos</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">outputs</span><span class="hl-1"> = </span><span class="hl-0">createTransactionOutputs</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-9">1500000</span><span class="hl-1">, </span><span class="hl-9">200000</span><span class="hl-1">, </span><span class="hl-4">recipientAddress</span><span class="hl-1">, </span><span class="hl-4">senderAddress</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">tokenPolicyId</span><span class="hl-1">, </span><span class="hl-2">&#39;NIGHT&#39;</span><span class="hl-1">, </span><span class="hl-9">1000</span><span class="hl-1">, </span><span class="hl-4">selectedUtxos</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-3">// Calculate TTL and build</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">ttl</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">calculateTtl</span><span class="hl-1">(</span><span class="hl-4">blockfrost</span><span class="hl-1">, </span><span class="hl-4">lucid</span><span class="hl-1">);</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-8">tx</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-0">buildTransaction</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">lucid</span><span class="hl-1">, </span><span class="hl-4">txInputs:</span><span class="hl-1"> </span><span class="hl-4">inputs</span><span class="hl-1">, </span><span class="hl-4">txOutputs:</span><span class="hl-1"> </span><span class="hl-4">outputs</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">fee:</span><span class="hl-1"> </span><span class="hl-9">200000</span><span class="hl-5">n</span><span class="hl-1">, </span><span class="hl-4">ttl</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-tag-remarks"><h4 class="tsd-anchor-link" id="remarks">Remarks<a href="#remarks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The fee parameter is included but not actually used by Lucid in this implementation.
Lucid calculates the actual fee automatically when the transaction is completed.
However, the fee is useful for output calculation in createTransactionOutputs().</p>
<p>The TTL (time-to-live) determines how long the transaction remains valid on the
blockchain. Transactions that aren't confirmed before the TTL expires are rejected.
Use calculateTtl() to get an appropriate TTL value.</p>
<p>The second parameter in collectFrom() is for Plutus redeemers - undefined is
appropriate for simple payment transactions without smart contracts.</p>
<p>The completed transaction must still be signed before submission. Use Lucid's
sign() method with a wallet or private key.</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/fireblocks/midnight-glacier-drop-sdk/blob/ea74eab342873e998a52b31619528b11b4392f7f/src/utils/cardano.utils.ts#L783">src/utils/cardano.utils.ts:783</a></li></ul></aside></div></li></ul></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">midnight-drop-fireblocks-sdk</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
